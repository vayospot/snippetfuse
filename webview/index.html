<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SnippetFuse - AI Context Builder</title>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="panel-header">
        <div class="header-content">
          <h1 class="panel-title">Context Builder</h1>
          <div class="header-actions">
            <a
              href="https://marketplace.visualstudio.com/items?itemName=vayospot.snippetfuse"
              class="icon-btn help-button"
              title="Help"
              aria-label="Help"
            >
              <span class="codicon codicon-question"></span>
            </a>
            <button
              class="icon-btn reset-button"
              title="Reset all"
              aria-label="Reset all"
            >
              <span class="codicon codicon-refresh"></span>
            </button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content" id="main-scroll-container">
        <!-- Prompt Template Selection -->
        <section class="prompt-section">
          <div class="section-label">
            <span class="codicon codicon-sparkle"></span>
            <span>Prompt Template</span>
          </div>
          <div class="prompt-dropdown-container">
            <div
              id="prompt-select-display"
              class="prompt-select"
              tabindex="0"
              role="button"
            >
              <span class="selected-prompt">Bug Report</span>
              <span class="codicon codicon-chevron-down dropdown-icon"></span>
            </div>
            <ul
              id="prompt-select-options"
              class="prompt-options hidden"
              role="listbox"
            >
              <li data-value="bug-report" role="option">Bug Report</li>
              <li data-value="feature-request" role="option">
                Feature Request
              </li>
              <li data-value="code-review" role="option">Code Review</li>
              <li data-value="custom" role="option">Custom Prompt</li>
            </ul>
          </div>
          <textarea
            id="custom-prompt-input"
            class="custom-prompt-input hidden"
            placeholder="Describe what you want the AI to help you with..."
            rows="3"
          ></textarea>
        </section>

        <!-- Code Context Section -->
        <section class="snippets-section">
          <div class="section-header context-header">
            <div class="section-label-with-count">
              <span class="codicon codicon-references"></span>
              <h2>Contexts</h2>
              <span class="count-badge unified-count">0</span>
            </div>
            <div class="header-inline-actions">
              <button
                id="quick-add-files-btn"
                class="icon-btn"
                title="Add Files from Project"
              >
                <span class="codicon codicon-files"></span>
              </button>
              <button
                id="add-external-info-btn"
                class="icon-btn"
                title="Add External Info"
              >
                <span class="codicon codicon-globe"></span>
              </button>
              <button
                id="add-terminal-log-btn"
                class="icon-btn"
                title="Add Terminal Logs"
              >
                <span class="codicon codicon-terminal"></span>
              </button>
            </div>
          </div>
          <div class="unified-context-container snippet-list">
            <!-- Empty state and cards will be injected here -->
          </div>
        </section>

        <!-- Additional Context Controls -->
        <section class="controls-section">
          <div class="section-header">
            <div class="section-label">
              <span class="codicon codicon-layers"></span>
              <h2>Additional Context</h2>
            </div>
          </div>

          <div class="control-group">
            <!-- Smart Suggestions -->
            <details
              class="control-item expandable"
              id="smart-suggestions-details"
            >
              <summary class="control-summary">
                <span class="control-label">Smart Suggestions</span>
                <span class="codicon codicon-add expand-icon"></span>
              </summary>
              <div class="control-content">
                <div
                  id="smart-suggestions-loading"
                  class="loading-state hidden"
                >
                  <span
                    class="codicon codicon-loading codicon-modifier-spin"
                  ></span>
                  <span>Analyzing snippets...</span>
                </div>
                <div
                  id="smart-suggestions-pills"
                  class="suggestions-pills"
                ></div>
                <div id="smart-suggestions-empty" class="empty-message hidden">
                  <span class="codicon codicon-info"></span>
                  <span>No suggestions available</span>
                </div>
              </div>
            </details>

            <!-- Project Tree Toggle -->
            <label class="toggle-control">
              <span class="control-label">Include Project Tree</span>
              <input
                type="checkbox"
                id="add-project-tree-checkbox"
                class="toggle-input"
              />
            </label>

            <!-- Request Full Code Toggle -->
            <label class="toggle-control">
              <span class="control-label">Request full code from AI</span>
              <input
                type="checkbox"
                id="request-full-code-checkbox"
                class="toggle-input"
              />
            </label>
          </div>
        </section>
      </main>

      <!-- Footer Actions -->
      <footer class="footer">
        <div class="token-warning hidden">
          <span class="codicon codicon-warning"></span>
          <span class="warning-text"
            >Context may exceed some models' token limits</span
          >
        </div>
        <div class="footer-actions">
          <button id="copy-to-clipboard-button" class="btn-primary">
            <span class="codicon codicon-copy"></span>
            <span>Copy to Clipboard</span>
          </button>
          <div class="dropdown-wrapper">
            <button
              id="export-dropdown-button"
              class="btn-secondary"
              title="Export options"
            >
              <span class="codicon codicon-export"></span>
            </button>
            <div id="export-dropdown-content" class="dropdown-menu hidden">
              <a href="#" data-format="md" class="dropdown-item">
                <span>Export as Markdown</span>
              </a>
              <a href="#" data-format="txt" class="dropdown-item">
                <span>Export as Text</span>
              </a>
              <a href="#" data-format="pdf" class="dropdown-item">
                <span>Export as PDF</span>
              </a>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </body>
</html>
